// Generated by CoffeeScript 1.6.3
(function() {
  $(function() {
    chrome.storage.local.get({
      'vkaccess_token': {}
    }, function(items) {
      if (items.vkaccess_token.length === void 0) {
        $('#authBtn').show();
        return;
      }
      console.log(items.vkaccess_token);
      return API.getWall('-52955676', items.vkaccess_token, function(data) {
        var i, item, _i, _len, _ref, _results;
        _ref = data.response;
        _results = [];
        for (i = _i = 0, _len = _ref.length; _i < _len; i = ++_i) {
          item = _ref[i];
          if (i === 0) {
            continue;
          }
          _results.push($('#list').append($('<li />').html(item.text)));
        }
        return _results;
      });
    });
    $('#authBtn').click(function(e) {
      chrome.runtime.sendMessage({
        action: "vk_notification_auth"
      }, function(response) {
        return console.log(response.content);
      });
      return e.preventDefault();
    });
    return $('#signoutBtn').click(function(e) {
      chrome.storage.local.remove('vkaccess_token');
      $('#list li').remove();
      return $('#authBtn').show();
    });
  });

}).call(this);
