// Generated by CoffeeScript 1.6.3
(function() {
  $(document).on('click', 'a', function(e) {
    chrome.tabs.create({
      url: $(this).attr('href'),
      selected: true
    });
    return e.preventDefault();
  });

  $(function() {
    chrome.storage.local.get({
      'vkaccess_token': {}
    }, function(items) {
      if (items.vkaccess_token.length === void 0) {
        $('#authBtn').show();
        return;
      }
      return API.wallGet('-52955676', items.vkaccess_token, function(data) {
        var i, item, _i, _len, _ref, _results;
        _ref = data.response;
        _results = [];
        for (i = _i = 0, _len = _ref.length; _i < _len; i = ++_i) {
          item = _ref[i];
          if (i === 0) {
            continue;
          }
          _results.push($('<div />', {
            "class": 'item'
          }).html(replaceURLWithHTMLLinks(item.text)).append($('<span />', {
            "class": 'datestamp'
          }).html(dateFormat(item.date * 1000, 'longDate'))).appendTo($('#notifications')));
        }
        return _results;
      });
    });
    $('#authBtn').click(function(e) {
      chrome.runtime.sendMessage({
        action: "vk_notification_auth"
      });
      return e.preventDefault();
    });
    return $('#signoutBtn').click(function(e) {
      chrome.storage.local.remove('vkaccess_token');
      $('#list li').remove();
      return $('#authBtn').show();
    });
  });

}).call(this);
